<!-- Подключения -->
<div class="card">
    <div class="flex justify-between mb-4">
        <h2 class="flex m-0">
            <i data-lucide="plug" class="text-accent icon-medium"></i>
            Подключения к LLM
        </h2>
        <button class="btn btn-primary btn-sm" onclick="openConnModal()">
            <i data-lucide="plus-circle" class="icon-small"></i>
            Добавить подключение
        </button>
    </div>
    <table class="table-fixed">
        <thead>
            <tr>
                <th>Имя</th>
                <th>Провайдер</th>
                <th>Модель</th>
                <th>Base URL</th>
                <th>Действия</th>
            </tr>
        </thead>
        <tbody>
            {% for c in connections %}
            <tr class="{% if c.is_active %}active{% endif %}">
                <td>{{ c.name }}</td>
                <td>{{ c.provider }}</td>
                <td title="{{ c.model_name }}">{{ c.model_name }}</td>
                <td class="text-xs text-secondary opacity-80">{{ c.base_url or '-' }}</td>
                <td>
                    <div class="flex gap-2 justify-end">
                        <button class="btn-icon {{ 'btn-icon-success' if c.is_active else 'btn-icon-primary' }}"
                            data-conn-id="{{ c.id }}" data-active="{{ 'true' if c.is_active else 'false' }}"
                            onclick="toggleConn(this.dataset.connId, this.dataset.active === 'true')"
                            title="{{ 'Деактивировать' if c.is_active else 'Активировать' }}">
                            <i data-lucide="{{ 'check' if c.is_active else 'power' }}" class="icon-small"></i>
                        </button>
                        <button class="btn-icon" onclick="showPrompts('{{ c.id }}', '{{ c.name }}')" title="Промпты">
                            <i data-lucide="terminal" class="icon-small"></i>
                        </button>
                        <button class="btn-icon btn-icon-accent" onclick="checkConn('{{ c.id }}')" title="Проверить">
                            <i data-lucide="activity" class="icon-small"></i>
                        </button>
                        <button class="btn-icon" onclick="editConn('{{ c.id }}')" title="Редактировать">
                            <i data-lucide="edit-3" class="icon-small"></i>
                        </button>
                        <button class="btn-icon btn-icon-danger" onclick="deleteConn('{{ c.id }}')" title="Удалить">
                            <i data-lucide="trash-2" class="icon-small"></i>
                        </button>
                    </div>
                </td>
            </tr>
            {% else %}
            <tr>
                <td colspan="5" class="text-center text-secondary">Нет подключений</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>