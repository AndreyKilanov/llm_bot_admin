<!-- Подключения -->
<div class="card">
    <div class="flex justify-between" style="margin-bottom: 1.5rem;">
        <h2 class="flex" style="margin:0">
            <i data-lucide="plug" style="color: var(--accent-primary)"></i>
            Подключения к LLM
        </h2>
        <button class="btn btn-primary btn-sm" onclick="openConnModal()">
            <i data-lucide="plus-circle" class="icon-small"></i>
            Добавить подключение
        </button>
    </div>
    <table class="table-fixed">
        <thead>
            <tr>
                <th>Имя</th>
                <th>Провайдер</th>
                <th>Модель</th>
                <th>Base URL</th>
                <th>Действия</th>
            </tr>
        </thead>
        <tbody>
            {% for c in connections %}
            <tr class="{% if c.is_active %}active{% endif %}">
                <td>{{ c.name }}</td>
                <td>{{ c.provider }}</td>
                <td title="{{ c.model_name }}">{{ c.model_name }}</td>
                <td style="font-size: 0.85rem; color: var(--text-secondary); opacity: 0.8;">{{ c.base_url or '-' }}</td>
                <td>
                    <div class="flex" style="gap: 0.5rem; justify-content: flex-end;">
                        <button
                            class="btn-icon {% if c.is_active %}btn-icon-success{% else %}btn-icon-primary{% endif %}"
                            onclick="{% if c.is_active %}deactivateConn({{ c.id }}){% else %}activateConn({{ c.id }}){% endif %}"
                            title="{% if c.is_active %}Деактивировать{% else %}Активировать{% endif %}">
                            <i data-lucide="{% if c.is_active %}check{% else %}power{% endif %}" class="icon-small"></i>
                        </button>
                        <button class="btn-icon" onclick="showPrompts({{ c.id }}, '{{ c.name }}')" title="Промпты">
                            <i data-lucide="terminal" class="icon-small"></i>
                        </button>
                        <button class="btn-icon btn-icon-accent" onclick="checkConn({{ c.id }})" title="Проверить">
                            <i data-lucide="activity" class="icon-small"></i>
                        </button>
                        <button class="btn-icon" onclick="editConn({{ c.id }})" title="Редактировать">
                            <i data-lucide="edit-3" class="icon-small"></i>
                        </button>
                        <button class="btn-icon btn-icon-danger" onclick="deleteConn({{ c.id }})" title="Удалить">
                            <i data-lucide="trash-2" class="icon-small"></i>
                        </button>
                    </div>
                </td>
            </tr>
            {% else %}
            <tr>
                <td colspan="5" style="text-align:center; color: var(--text-secondary);">Нет подключений</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>